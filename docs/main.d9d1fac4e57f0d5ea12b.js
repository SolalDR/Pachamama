webpackJsonp([0],[,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={BRANCH:1,TRUNK:2,HERITANCE:3,branch:{noise:{force:1.5,speed:.15},l:{min:.1,max:1.5,wRat:{min:10,max:15}},w:{min:.05,max:.5,transfer:{min:.5,max:.7}},transition:{w:.3},prob:{behaviourSeparation:{division:0,ramification:1},countChild:[0,0,2,2,0,0]}},trunk:{l:2.5,w:.5,transition:{w:.3},noise:{force:.15,speed:.3},prob:{behaviourSeparation:{division:.2,ramification:1},countChild:[0,0,2,7,0,0]}},compute:{precision:.01,dist:.1}}},function(e,t,n){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=e.Vector3,a=e.Vector2,r=(e.Vector4,function(){function e(){n(this,e)}return i(e,null,[{key:"randomInBox",value:function(e){return new o((e.x.max-e.x.min)*Math.random()+e.x.min,(e.y.max-e.y.min)*Math.random()+e.y.min,(e.z.max-e.z.min)*Math.random()+e.z.min)}},{key:"randomInCircle",value:function(e){var t=2*Math.random()*Math.PI;return new a(Math.cos(t)*e,Math.sin(t)*e)}},{key:"inSphere",value:function(e){var t=2*Math.PI*Math.random(),n=Math.acos(2*Math.random()-1);return new o(e*Math.sin(n)*Math.cos(t),e*Math.sin(n)*Math.sin(t),e*Math.cos(n))}},{key:"randomInDisc",value:function(e){var t=2*Math.random()*Math.PI;return new o(Math.cos(t)*e,0,Math.sin(t)*e)}},{key:"betweenNumber",value:function(e,t){return(t-e)*Math.random()+e}},{key:"loopRandomInDisc",value:function(t,n){for(var i=[],o=0;o<t;o++)i.push(e.randomInDisc(n));return i}},{key:"loopBetweenNumber",value:function(t,n,i){for(var o=[],a=0;a<t;a++)o.push(e.betweenNumber(n,i));return o}}]),e}());t.default=r}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(8),s=i(r),c=n(12),u=i(c),d=n(16),h=n(7),l=i(h),f=n(10),m=i(f),p=n(6),b=i(p),v=function(){function t(){o(this,t),this.config=b.default,window.addEventListener("resize",this.onWindowResize.bind(this),!1),document.body.addEventListener("click",this.updateMousePosition.bind(this),!1),this.container=document.querySelector("#main"),document.body.appendChild(this.container),this.renderer=new e.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor(15658734,1),this.container.appendChild(this.renderer.domElement),this.camera=new e.PerspectiveCamera(70,window.innerWidth/window.innerHeight,.1,1e3),this.camera.position.set(10,0,0),this.controls=new s.default(this.camera),this.mouse=new e.Vector2,this.clock=new l.default,this.config.stats&&this.initStat(),this.scene=new e.Scene,this.tree=new m.default,this.scene.add(this.tree.mesh),this.config.gui&&this.initDatGUI(),this.onWindowResize(),this.renderer.animate(this.render.bind(this))}return a(t,[{key:"initDatGUI",value:function(){var e=this,t=new u.default.GUI;t.close();var n=t.addFolder("Branch"),i=t.addFolder("Trunk");t.add(m.default.CONFIG.compute,"precision",.001,.1).onFinishChange(e.tree.update.bind(e.tree)),t.add(m.default.CONFIG.compute,"dist",0,1).onFinishChange(e.tree.update.bind(e.tree)),i.add(m.default.CONFIG.trunk,"l",0,10).name("length").onFinishChange(e.tree.update.bind(e.tree)),i.add(m.default.CONFIG.trunk,"w",0,2.5).name("weight").onFinishChange(e.tree.update.bind(e.tree)),i.add(m.default.CONFIG.trunk.noise,"speed",0,2).name("twistChangeSpeed").onFinishChange(e.tree.update.bind(e.tree)),i.add(m.default.CONFIG.trunk.noise,"force",0,2).name("twistForce").onFinishChange(e.tree.update.bind(e.tree)),i.add(m.default.CONFIG.trunk.transition,"w",0,1).name("weightTransition").onFinishChange(e.tree.update.bind(e.tree));var o=i.addFolder("Branch Child creation");o.add(m.default.CONFIG.trunk.prob.behaviourSeparation,"division",0,1).name("Division").onFinishChange(e.tree.update.bind(e.tree)),o.add(m.default.CONFIG.trunk.prob.behaviourSeparation,"ramification",0,1).name("Ramification").onFinishChange(e.tree.update.bind(e.tree));for(var a=o.addFolder("Number of child branches (probability)"),r=0;r<m.default.CONFIG.trunk.prob.countChild.length;r++)a.add(m.default.CONFIG.trunk.prob.countChild,r,0,10).step(.2).onFinishChange(e.tree.update.bind(e.tree));this.manageMinMaxGui(m.default.CONFIG.branch.l,n,0,10,"Length"),this.manageMinMaxGui(m.default.CONFIG.branch.w,n,0,2,"Weight"),this.manageMinMaxGui(m.default.CONFIG.branch.w.transfer,n,0,1,"Transfer"),n.add(m.default.CONFIG.branch.noise,"speed",0,2).name("twistChangeSpeed").onFinishChange(e.tree.update.bind(e.tree)),n.add(m.default.CONFIG.branch.noise,"force",0,2).name("twistForce").onFinishChange(e.tree.update.bind(e.tree)),n.add(m.default.CONFIG.branch.transition,"w",0,1).name("weightTransition").onFinishChange(e.tree.update.bind(e.tree));var s=n.addFolder("Branch Child creation");s.add(m.default.CONFIG.branch.prob.behaviourSeparation,"division",0,1).name("Division").onFinishChange(e.tree.update.bind(e.tree)),s.add(m.default.CONFIG.branch.prob.behaviourSeparation,"ramification",0,1).name("Ramification").onFinishChange(e.tree.update.bind(e.tree));for(var c=s.addFolder("Number of child branches (probability)"),r=0;r<m.default.CONFIG.branch.prob.countChild.length;r++)c.add(m.default.CONFIG.branch.prob.countChild,r,0,10).step(.2).onFinishChange(e.tree.update.bind(e.tree))}},{key:"manageMinMaxGui",value:function(e,t,n,i,o){var a=this;t.add(e,"min",n,i).name("min"+o).listen().onChange(function(t){e.max<e.min&&(e.max=e.min)}).onFinishChange(a.tree.update.bind(a.tree)),t.add(e,"max",n,i).name("max"+o).listen().onChange(function(t){e.max<e.min&&(e.min=e.max)}).onFinishChange(a.tree.update.bind(a.tree))}},{key:"initStat",value:function(){this.stats=new d.Stats,this.stats.showPanel(1),document.body.appendChild(this.stats.dom)}},{key:"beforeRender",value:function(){this.config.stats&&this.stats.begin(),this.clock.update()}},{key:"afterRender",value:function(){this.config.stats&&this.stats.end()}},{key:"render",value:function(){this.beforeRender(),this.tree.render(this.clock.elapsed),this.renderer.render(this.scene,this.camera),this.afterRender()}},{key:"updateMousePosition",value:function(e){this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1}},{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}}]),t}();t.default=v}).call(t,n(0))},function(e,t){},function(e,t,n){"use strict";n(4);var i=n(3),o=function(e){return e&&e.__esModule?e:{default:e}}(i);window.app=new o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={stats:!1,gui:!0}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){i(this,e),this.autoStart=void 0===t||t,this._start=0,this.old=0,this.running=!1,this.elapsed=0,this.autoStart&&this.start()}return o(e,[{key:"start",value:function(){this._start=Date.now(),this.old=this._start,this.elapsed=0,this.running=!0}},{key:"stop",value:function(){this.running=!1}},{key:"update",value:function(){if(this.running){var e=Date.now();this.elapsed+=e-this.old,this.old=e}}}]),e}();t.default=a},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),e.OrbitControls=function(t,n){function i(){return 2*Math.PI/60/60*A.autoRotateSpeed}function o(){return Math.pow(.95,A.zoomSpeed)}function a(e){D.theta-=e}function r(e){D.phi-=e}function s(t){A.object instanceof e.PerspectiveCamera?U/=t:A.object instanceof e.OrthographicCamera?(A.object.zoom=Math.max(A.minZoom,Math.min(A.maxZoom,A.object.zoom*t)),A.object.updateProjectionMatrix(),Z=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),A.enableZoom=!1)}function c(t){A.object instanceof e.PerspectiveCamera?U*=t:A.object instanceof e.OrthographicCamera?(A.object.zoom=Math.max(A.minZoom,Math.min(A.maxZoom,A.object.zoom/t)),A.object.updateProjectionMatrix(),Z=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),A.enableZoom=!1)}function u(e){B.set(e.clientX,e.clientY)}function d(e){J.set(e.clientX,e.clientY)}function h(e){K.set(e.clientX,e.clientY)}function l(e){W.set(e.clientX,e.clientY),X.subVectors(W,B);var t=A.domElement===document?A.domElement.body:A.domElement;a(2*Math.PI*X.x/t.clientWidth*A.rotateSpeed),r(2*Math.PI*X.y/t.clientHeight*A.rotateSpeed),B.copy(W),A.update()}function f(e){$.set(e.clientX,e.clientY),ee.subVectors($,J),ee.y>0?s(o()):ee.y<0&&c(o()),J.copy($),A.update()}function m(e){q.set(e.clientX,e.clientY),Q.subVectors(q,K),ie(Q.x,Q.y),K.copy(q),A.update()}function p(e){}function b(e){e.deltaY<0?c(o()):e.deltaY>0&&s(o()),A.update()}function v(e){switch(e.keyCode){case A.keys.UP:ie(0,A.keyPanSpeed),A.update();break;case A.keys.BOTTOM:ie(0,-A.keyPanSpeed),A.update();break;case A.keys.LEFT:ie(A.keyPanSpeed,0),A.update();break;case A.keys.RIGHT:ie(-A.keyPanSpeed,0),A.update()}}function g(e){B.set(e.touches[0].pageX,e.touches[0].pageY)}function w(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);J.set(0,i)}function y(e){K.set(e.touches[0].pageX,e.touches[0].pageY)}function C(e){W.set(e.touches[0].pageX,e.touches[0].pageY),X.subVectors(W,B);var t=A.domElement===document?A.domElement.body:A.domElement;a(2*Math.PI*X.x/t.clientWidth*A.rotateSpeed),r(2*Math.PI*X.y/t.clientHeight*A.rotateSpeed),B.copy(W),A.update()}function O(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);$.set(0,i),ee.subVectors($,J),ee.y>0?c(o()):ee.y<0&&s(o()),J.copy($),A.update()}function E(e){q.set(e.touches[0].pageX,e.touches[0].pageY),Q.subVectors(q,K),ie(Q.x,Q.y),K.copy(q),A.update()}function M(e){}function k(e){if(!1!==A.enabled){switch(e.preventDefault(),e.button){case A.mouseButtons.ORBIT:if(!1===A.enableRotate)return;u(e),_=G.ROTATE;break;case A.mouseButtons.ZOOM:if(!1===A.enableZoom)return;d(e),_=G.DOLLY;break;case A.mouseButtons.PAN:if(!1===A.enablePan)return;h(e),_=G.PAN}_!==G.NONE&&(document.addEventListener("mousemove",P,!1),document.addEventListener("mouseup",x,!1),A.dispatchEvent(L))}}function P(e){if(!1!==A.enabled)switch(e.preventDefault(),_){case G.ROTATE:if(!1===A.enableRotate)return;l(e);break;case G.DOLLY:if(!1===A.enableZoom)return;f(e);break;case G.PAN:if(!1===A.enablePan)return;m(e)}}function x(e){!1!==A.enabled&&(p(e),document.removeEventListener("mousemove",P,!1),document.removeEventListener("mouseup",x,!1),A.dispatchEvent(z),_=G.NONE)}function N(e){!1===A.enabled||!1===A.enableZoom||_!==G.NONE&&_!==G.ROTATE||(e.preventDefault(),e.stopPropagation(),b(e),A.dispatchEvent(L),A.dispatchEvent(z))}function F(e){!1!==A.enabled&&!1!==A.enableKeys&&!1!==A.enablePan&&v(e)}function R(e){if(!1!==A.enabled){switch(e.touches.length){case 1:if(!1===A.enableRotate)return;g(e),_=G.TOUCH_ROTATE;break;case 2:if(!1===A.enableZoom)return;w(e),_=G.TOUCH_DOLLY;break;case 3:if(!1===A.enablePan)return;y(e),_=G.TOUCH_PAN;break;default:_=G.NONE}_!==G.NONE&&A.dispatchEvent(L)}}function T(e){if(!1!==A.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===A.enableRotate)return;if(_!==G.TOUCH_ROTATE)return;C(e);break;case 2:if(!1===A.enableZoom)return;if(_!==G.TOUCH_DOLLY)return;O(e);break;case 3:if(!1===A.enablePan)return;if(_!==G.TOUCH_PAN)return;E(e);break;default:_=G.NONE}}function j(e){!1!==A.enabled&&(M(e),A.dispatchEvent(z),_=G.NONE)}function I(e){!1!==A.enabled&&e.preventDefault()}this.object=t,this.domElement=void 0!==n?n:document,this.enabled=!0,this.target=new e.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:e.MOUSE.LEFT,ZOOM:e.MOUSE.MIDDLE,PAN:e.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return V.phi},this.getAzimuthalAngle=function(){return V.theta},this.saveState=function(){A.target0.copy(A.target),A.position0.copy(A.object.position),A.zoom0=A.object.zoom},this.reset=function(){A.target.copy(A.target0),A.object.position.copy(A.position0),A.object.zoom=A.zoom0,A.object.updateProjectionMatrix(),A.dispatchEvent(S),A.update(),_=G.NONE},this.update=function(){var n=new e.Vector3,o=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),r=o.clone().inverse(),s=new e.Vector3,c=new e.Quaternion;return function(){var e=A.object.position;return n.copy(e).sub(A.target),n.applyQuaternion(o),V.setFromVector3(n),A.autoRotate&&_===G.NONE&&a(i()),V.theta+=D.theta,V.phi+=D.phi,V.theta=Math.max(A.minAzimuthAngle,Math.min(A.maxAzimuthAngle,V.theta)),V.phi=Math.max(A.minPolarAngle,Math.min(A.maxPolarAngle,V.phi)),V.makeSafe(),V.radius*=U,V.radius=Math.max(A.minDistance,Math.min(A.maxDistance,V.radius)),A.target.add(Y),n.setFromSpherical(V),n.applyQuaternion(r),e.copy(A.target).add(n),A.object.lookAt(A.target),!0===A.enableDamping?(D.theta*=1-A.dampingFactor,D.phi*=1-A.dampingFactor):D.set(0,0,0),U=1,Y.set(0,0,0),!!(Z||s.distanceToSquared(A.object.position)>H||8*(1-c.dot(A.object.quaternion))>H)&&(A.dispatchEvent(S),s.copy(A.object.position),c.copy(A.object.quaternion),Z=!1,!0)}}(),this.dispose=function(){A.domElement.removeEventListener("contextmenu",I,!1),A.domElement.removeEventListener("mousedown",k,!1),A.domElement.removeEventListener("wheel",N,!1),A.domElement.removeEventListener("touchstart",R,!1),A.domElement.removeEventListener("touchend",j,!1),A.domElement.removeEventListener("touchmove",T,!1),document.removeEventListener("mousemove",P,!1),document.removeEventListener("mouseup",x,!1),window.removeEventListener("keydown",F,!1)};var A=this,S={type:"change"},L={type:"start"},z={type:"end"},G={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},_=G.NONE,H=1e-6,V=new e.Spherical,D=new e.Spherical,U=1,Y=new e.Vector3,Z=!1,B=new e.Vector2,W=new e.Vector2,X=new e.Vector2,K=new e.Vector2,q=new e.Vector2,Q=new e.Vector2,J=new e.Vector2,$=new e.Vector2,ee=new e.Vector2,te=function(){var t=new e.Vector3;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),Y.add(t)}}(),ne=function(){var t=new e.Vector3;return function(e,n){t.setFromMatrixColumn(n,1),t.multiplyScalar(e),Y.add(t)}}(),ie=function(){var t=new e.Vector3;return function(n,i){var o=A.domElement===document?A.domElement.body:A.domElement;if(A.object instanceof e.PerspectiveCamera){var a=A.object.position;t.copy(a).sub(A.target);var r=t.length();r*=Math.tan(A.object.fov/2*Math.PI/180),te(2*n*r/o.clientHeight,A.object.matrix),ne(2*i*r/o.clientHeight,A.object.matrix)}else A.object instanceof e.OrthographicCamera?(te(n*(A.object.right-A.object.left)/A.object.zoom/o.clientWidth,A.object.matrix),ne(i*(A.object.top-A.object.bottom)/A.object.zoom/o.clientHeight,A.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),A.enablePan=!1)}}();A.domElement.addEventListener("contextmenu",I,!1),A.domElement.addEventListener("mousedown",k,!1),A.domElement.addEventListener("wheel",N,!1),A.domElement.addEventListener("touchstart",R,!1),A.domElement.addEventListener("touchend",j,!1),A.domElement.addEventListener("touchmove",T,!1),window.addEventListener("keydown",F,!1),this.update()},e.OrbitControls.prototype=Object.create(e.EventDispatcher.prototype),e.OrbitControls.prototype.constructor=e.OrbitControls,Object.defineProperties(e.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),t.default=e.OrbitControls}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),s=i(r),c=n(11),u=i(c),d=n(2),h=(i(d),function(){function t(e){o(this,t),this.type=void 0!==e.type?e.type:s.default.BRANCH,this.parent=this.type==s.default.TRUNK?null:e.parent,this.noise=void 0!==e.noise?e.noise:this.parent.noise,this.length=null,this.baseLength=0,this.weight=null,this.ramifications=[],this.init()}return a(t,[{key:"initTrunk",value:function(){this.length=s.default.trunk.l,this.weight=s.default.trunk.w,this.noiseCoord=new e.Vector2(Math.random(),Math.random())}},{key:"initBranch",value:function(){this.inheritance?(this.noiseCoord=this.parent.noiseCoord,this.type=this.parent.type,this.baseLength=this.parent.length):this.noiseCoord=new e.Vector2(Math.random(),Math.random());var t=u.default.between(s.default.branch.w.transfer.min,s.default.branch.w.transfer.max);this.weight=t*this.parent.weight;var n=u.default.between(s.default.branch.l.wRat.min,s.default.branch.l.wRat.max);this.length=Math.min(this.weight*n,s.default.branch.l.max)}},{key:"init",value:function(){this.parent?this.initBranch():this.initTrunk(),this.baseCoord=null==this.parent?new e.Vector3:this.parent.topCoord,this.topCoord=this.getCoordsAtLength(this.length),this.canHaveChild&&this.genRamification()}},{key:"genRamification",value:function(){for(var e=u.default.random(this.config.prob.countChild),n=u.default.random(this.config.prob.behaviourSeparation),i="ramification"==n,o=0;o<e;o++)this.ramifications.push(new t({inheritance:i,parent:this})),i=!1}},{key:"getCoordsAtLength",value:function(t){var n=this.config,i=n.noise.force*t*this.noise.simplex2(n.noise.speed*t+this.noiseCoord.x,this.noiseCoord.y),o=n.noise.force*t*this.noise.simplex2(this.noiseCoord.x,this.noiseCoord.x+n.noise.speed*t),a=(new e.Vector3).copy(this.baseCoord);return a.x+=i,a.y+=t,a.z+=o,a}},{key:"genCircles",value:function(t,n){var i,o,a,r,c,u,d,h,l,f,m,p=[];t.unshift(this.baseCoord);for(var b=1;b<t.length;b++){this.parent?(f=1-Math.min(1,b*n/this.length/this.config.transition.w),m=this.parent.weight-this.weight):(f=1-Math.min(1,b*n/this.length/this.config.transition.w),m=.8*this.weight),l=f*m+this.weight,a=Math.floor(2*Math.PI*l/s.default.compute.dist),h=2*Math.PI/a,d=Math.random()*(2*Math.PI/6),i=(new e.Vector3).copy(t[b]).sub(t[b-1]);for(var v=0;v<a;v++)r=d+h*v,o=new e.Vector3(Math.cos(r)*l,0,Math.sin(r)*l),c=Math.acos(o.dot(i)),u=(new e.Vector3).copy(o).cross(i),o.applyAxisAngle(u,c).add(t[b]),p.push((new e.Vector3).copy(o))}return p}},{key:"compute",value:function(e){for(var t=[],n=Math.floor(this.length/e),i=0;i<n;i++)t.push(this.getCoordsAtLength(i*e));t=this.genCircles(t,e);for(var i=0;i<this.ramifications.length;i++)t=t.concat(this.ramifications[i].compute(e));return t}},{key:"config",get:function(){return this.type==s.default.TRUNK?s.default.trunk:s.default.branch}},{key:"canHaveChild",get:function(){return this.weight>s.default.branch.w.min}}]),t}());t.default=h}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),s=i(r),c=n(15),u=n(9),d=i(u),h=n(2),l=i(h),f=n(17),m=i(f),p=n(18),b=i(p),v=function(){function t(){o(this,t),this.config=s.default,this.noise=new c.Noise,this.new(),this.init()}return a(t,null,[{key:"CONFIG",get:function(){return s.default}}]),a(t,[{key:"new",value:function(){this.tree=new d.default({type:t.CONFIG.TRUNK,noise:this.noise}),this.compute()}},{key:"compute",value:function(){for(var e=this.tree.compute(s.default.compute.precision),t=new Float32Array(3*e.length),n=0;n<e.length;n++)t[3*n]=e[n].x,t[3*n+1]=e[n].y,t[3*n+2]=e[n].z;return t}},{key:"update",value:function(){this.new(),this.createGeometry(),this.mesh.geometry=this.geometry}},{key:"render",value:function(e){this.material.uniforms.time.value=e,this.material.uniforms.needsUpdate=!0}},{key:"createGeometry",value:function(){this.geometry=new e.BufferGeometry;for(var t=this.compute(),n=new Float32Array(t.length),i=0;i<n.length;i+=3)l.default.inSphere(Math.random()),n[i]=0,n[i+1]=-10,n[i+2]=0;for(var o=new Float32Array(t.length/3),i=0;i<t.length;i+=3)o[i/3]=500*t[i+1]+l.default.betweenNumber(500,1e3);var a=new Float32Array(t.length/3).fill(0).map(function(e){return 1e3*Math.random()});this.geometry.addAttribute("position",new e.BufferAttribute(t,3)),this.geometry.addAttribute("floorPos",new e.BufferAttribute(n,3)),this.geometry.addAttribute("animation",new e.BufferAttribute(o,1)),this.geometry.addAttribute("animationStart",new e.BufferAttribute(a,1))}},{key:"init",value:function(){this.createGeometry();var t={time:{type:"f",value:0}};this.material=new e.ShaderMaterial({uniforms:t,fragmentShader:m.default,vertexShader:b.default,color:8947848}),this.mesh=new e.Points(this.geometry,this.material),this.mesh.name="Tree",this.mesh.position.y=-5}}]),t}();t.default=v}).call(t,n(0))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){i(this,e)}return o(e,null,[{key:"random",value:function(e){var t=0,n=null,i=[],o=[];if(e instanceof Array)for(var a=0;a<e.length;a++)i.push(a),o.push(e[a]),t+=e[a];if(e instanceof Object)for(var a in e)i.push(a),o.push(e[a]),t+=e[a];for(var r=Math.random()*t,a=0,s=0;a<o.length;a++)if(s+=o[a],r<s){n=i[a];break}return n}},{key:"between",value:function(e,t){return(t-e)*Math.random()+e}}]),e}();t.default=a},,,,,,function(e,t){e.exports="void main () {\n  gl_FragColor = vec4(0., 0., 0., 1.);\n}"},function(e,t){e.exports="uniform float time; \nattribute float animation; \nattribute vec3 floorPos; \nattribute float animationStart;\n\n#define PI 3.14159265358979323846\n\nfloat cubicOut(float t) {\n  float f = t - 1.0;\n  return f * f * f + 1.0;\n}\n\nfloat cubicInOut(float t) {\n  return t < 0.5\n    ? 4.0 * t * t * t\n    : 0.5 * pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\n\nfloat mod289(float x){return x - floor(x * (1.0 / 289.0)) * 289.0;}\nvec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}\nvec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}\n\nfloat noise(vec3 p){\n    vec3 a = floor(p);\n    vec3 d = p - a;\n    d = d * d * (3.0 - 2.0 * d);\n\n    vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n    vec4 k1 = perm(b.xyxy);\n    vec4 k2 = perm(k1.xyxy + b.zzww);\n\n    vec4 c = k2 + a.zzzz;\n    vec4 k3 = perm(c);\n    vec4 k4 = perm(c + 1.0);\n\n    vec4 o1 = fract(k3 * (1.0 / 41.0));\n    vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n    vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n    vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n    return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvoid main() {\n    gl_PointSize = 1.5;\n\n    float linearAnim = 0.;\n    if( time > animationStart ){\n        linearAnim = min(1., (time - animationStart)/(animationStart+animation)); \n    }\n    \n    float anim = cubicOut(linearAnim); \n    float radius;\n\n\n    if( anim < 0.5 ){\n        radius = cubicInOut(anim*2.) * 2.; \n    } else {\n        radius = 1. - cubicInOut((anim - 0.5)*2.) * 2.;\n    }\n\n    vec3 newPosition;\n\n    \n    vec3 trans = floorPos + (position - floorPos) * anim;\n    vec3 local = vec3( trans.x + cos(anim*6.*PI)*radius, trans.y, trans.z + sin(anim*2.*PI)*radius );\n    \n\n    local = vec3( cos(linearAnim*2.*PI * 5.) * radius, 0, sin(linearAnim*2.*PI * 5.) * radius);\n\n\n    newPosition = local + trans;\n    newPosition = newPosition + position * noise( vec3(position.xy, position.z + time/1000. ) ) * 0.1;\n    \n\n\n\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);\n\n}"}],[5]);